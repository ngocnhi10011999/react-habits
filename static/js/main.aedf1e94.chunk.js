(this["webpackJsonphabit-tracker"]=this["webpackJsonphabit-tracker"]||[]).push([[0],{191:function(e,t,a){e.exports=a(347)},196:function(e,t,a){},347:function(e,t,a){"use strict";a.r(t);for(var n=a(0),r=a.n(n),c=a(43),u=a.n(c),i=(a(196),a(18)),o=a(23),l=a(110),s=a(8),d=a.n(s),p=a(16),f=a(29),h=a.n(f),m=null,b={register:function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("".concat("/api/auth","/register"),t);case 2:if(!(a=e.sent).data.error){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),login:function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("".concat("/api/auth","/login"),t);case 2:if(!(a=e.sent).data.error){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){m="bearer ".concat(e)},getToken:function(){return m}},y={getAll:function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:b.getToken()}},e.next=3,h.a.get("/api/dates",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addNew:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:b.getToken()}},e.next=3,h.a.post("/api/dates",t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:b.getToken()}},e.next=3,h.a.put("".concat("/api/dates","/").concat(t),a,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.addNew(e);case 2:n=t.sent,a({type:"ADDDATE",data:Object(l.a)(Object(l.a)({},n),{},{habitsMarked:n.habitsMarked.map((function(e){return e.id}))})});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITDATES":return t.data;case"ADDDATE":return e.concat(t.data);case"TOGGLEHABIT":return e.map((function(e){return e.id===t.data.id?t.data:e}));default:return e}},g=a(55),O={addDate:E,toggleHabit:function(e,t){return function(){var a=Object(p.a)(d.a.mark((function a(n){var r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y.update(e.id,t);case 2:r=a.sent,n({type:"TOGGLEHABIT",data:r});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}},w=Object(i.b)((function(e){return{dates:e.dates,display:e.display}}),O)((function(e){var t=e.thisDate,a=e.i,c=e.habit,u=e.display,i=e.addDate,l=e.toggleHabit,s=e.dates,d=Object(n.useState)(!1),p=Object(o.a)(d,2),f=p[0],h=p[1];Object(n.useEffect)((function(){var e=s.filter((function(e){return e.year===u.displayYear})).filter((function(e){return e.month===u.displayMonth+1})).find((function(e){return e.day===a}));h(void 0!==e&&void 0!==e.habitsMarked.find((function(e){return e===c.id})))}),[s,u.displayYear,u.displayMonth,a,c.id]);return r.a.createElement("div",{onClick:function(){void 0===t?i({day:a,month:u.displayMonth+1,year:u.displayYear,habitsMarked:[c]}):l(t,c),h(!f)}},f?r.a.createElement(g.a,{name:"circle"}):r.a.createElement(g.a,{name:"circle outline"}))})),T={getAll:function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:b.getToken()}},e.next=3,h.a.get("/api/habits",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addNew:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:b.getToken()}},e.next=3,h.a.post("/api/habits",t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:b.getToken()}},e.next=3,h.a.put("".concat("/api/habits","/").concat(t.id),t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:b.getToken()}},e.next=3,h.a.delete("".concat("/api/habits","/").concat(t),a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITHABITS":return t.data;case"NEWHABIT":return e.concat(t.data);case"DELETEHABIT":return e.filter((function(e){return e.name!==t.data.name}));case"HIGHLIGHTHABIT":return e.map((function(e){return e.name===t.data.name?t.data:e}));default:return e}},j=a(359),k=a(361),N={deleteHabit:function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.remove(e.id);case 2:a({type:"DELETEHABIT",data:e}),a({type:"SETNOTIFICATION",data:"Deleted habit: ".concat(e.name)}),setTimeout((function(){a({type:"SETNOTIFICATION",data:null})}),4e3);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},highlightHabit:function(e){return e.important=!e.important,function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.update(e);case 2:n=t.sent,a({type:"HIGHLIGHTHABIT",data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},x=Object(i.b)((function(e){return{dates:e.dates,display:e.display}}),N)((function(e){var t=e.habit,a=e.dates,c=e.display,u=e.deleteHabit,i=e.highlightHabit,l=Object(n.useState)(a),s=Object(o.a)(l,2),d=s[0],p=s[1],f=Object(n.useState)([]),h=Object(o.a)(f,2),m=h[0],b=h[1],y=Object(n.useState)(!1),E=Object(o.a)(y,2),v=E[0],O=E[1];Object(n.useEffect)((function(){var e=a.filter((function(e){return e.year===c.displayYear})).filter((function(e){return e.month===c.displayMonth+1}));p(e)}),[a,c.displayMonth,c.displayYear]),Object(n.useEffect)((function(){for(var e=[],a=function(a){var n={thisDate:d.find((function(e){return e.day===a})),i:a,habit:t};e.push(n)},n=1;n<=c.displayMonthLength;n++)a(n);b(e)}),[c.displayMonthLength,d,t]),Object(n.useEffect)((function(){O(t.important)}),[t.important]);return r.a.createElement(j.a.Row,null,r.a.createElement(j.a.Cell,{onClick:function(){O(!v),i(t)},style:v?{backgroundColor:"yellow"}:{backgroundColor:""}},t.name),m.map((function(e){return r.a.createElement(j.a.Cell,{key:e.i},r.a.createElement(w,e))})),r.a.createElement(j.a.Cell,null,r.a.createElement(k.a,{animated:!0,color:"red",onClick:function(){return u(t)}},r.a.createElement(k.a.Content,{visible:!0},r.a.createElement(g.a,{name:"delete"})),r.a.createElement(k.a.Content,{hidden:!0},"DELETE"))))})),M=["January","February","March","April","May","June","July","August","September","October","November","December"],A=[31,28,31,30,31,30,31,31,30,31,30,31],C=new Date,H=C.getMonth(),S={currentDate:C,displayMonth:H,displayYear:C.getFullYear(),displayMonthName:M[H],displayMonthLength:A[H]},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGEMONTH":return t.data<0?{currentDate:e.currentDate,displayMonth:11,displayYear:e.displayYear-1,displayMonthName:M[11],displayMonthLength:A[11]}:t.data>11?{currentDate:e.currentDate,displayMonth:0,displayYear:e.displayYear+1,displayMonthName:M[0],displayMonthLength:A[0]}:{currentDate:e.currentDate,displayMonth:t.data,displayYear:e.displayYear,displayMonthName:M[t.data],displayMonthLength:A[t.data]};default:return e}},L=a(355),F=a(84),G=a(356),Y={padding:"10px","text-align":"center"},B=[],P=1;P<=31;P++){var R=r.a.createElement(j.a.HeaderCell,{style:Y,key:P},P);B.push(R)}var z={addDate:E,changeDisplayMonth:function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"CHANGEMONTH",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},initHabits:function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getAll();case 2:a=e.sent,t({type:"INITHABITS",data:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},initDates:function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getAll();case 2:a=e.sent,t({type:"INITDATES",data:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},U=Object(i.b)((function(e){return{habits:e.habits,dates:e.dates,display:e.display}}),z)((function(e){return Object(n.useEffect)((function(){e.initHabits()}),[e]),Object(n.useEffect)((function(){e.initDates()}),[e]),r.a.createElement(L.a,{style:{width:"100%"}},r.a.createElement("h2",null,"".concat(e.display.displayMonthName," (").concat(e.display.displayMonth+1,"/").concat(e.display.displayYear,")")),e.display.displayMonth===e.display.currentDate.getMonth()?r.a.createElement(F.a,{color:"teal"},"Current Month"):r.a.createElement(r.a.Fragment,null),r.a.createElement(G.a,{hidden:!0}),r.a.createElement(L.a,{style:{width:"100%",margin:"0 auto"}},r.a.createElement(j.a,{striped:!0,celled:!0,compact:"very",style:{}},r.a.createElement(j.a.Header,null,r.a.createElement(j.a.Row,null,r.a.createElement(j.a.HeaderCell,null,"Habit"),B.slice(0,e.display.displayMonthLength).map((function(e){return e})),r.a.createElement(j.a.HeaderCell,null,"Delete"))),r.a.createElement(j.a.Body,null,e.habits.map((function(e){return r.a.createElement(x,{key:e.name,habit:e})}))))),r.a.createElement(G.a,{hidden:!0}),r.a.createElement(k.a,{icon:!0,labelPosition:"left",onClick:function(){return e.changeDisplayMonth(e.display.displayMonth-1)}},r.a.createElement(g.a,{name:"angle left"}),r.a.createElement(k.a.Content,null,"Previous Month")),r.a.createElement(k.a,{icon:!0,labelPosition:"right",onClick:function(){return e.changeDisplayMonth(e.display.displayMonth+1)}},r.a.createElement(g.a,{name:"angle right"}),r.a.createElement(k.a.Content,null,"Next Month")))})),J=a(358),W={newHabit:function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.addNew(e);case 2:n=t.sent,a({type:"NEWHABIT",data:n}),a({type:"SETNOTIFICATION",data:"Added new habit: ".concat(e.name)}),setTimeout((function(){a({type:"SETNOTIFICATION",data:null})}),4e3);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},q=Object(i.b)(null,W)((function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],u=a[1];return r.a.createElement("div",{style:{width:"60%",margin:"0 auto"}},r.a.createElement("h3",{class:"text-add-habit"},"Add a Habit"),r.a.createElement(J.a,{onSubmit:function(t){t.preventDefault(),e.newHabit({name:c,important:!1}),u("")}},r.a.createElement(J.a.Input,{placeholder:"Jogging",type:"text",value:c,onChange:function(e){return u(e.target.value)}}),r.a.createElement(J.a.Button,{type:"submit"},"Add new...")))})),K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.data;case"LOGOUT":return null;default:return e}},Q={login:function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.login(e);case 2:(n=t.sent)?(b.setToken(n.token),window.localStorage.setItem("user",JSON.stringify(n)),a({type:"LOGIN",data:n})):(a({type:"SETNOTIFICATION",data:"Login failed. Invalid username or password."}),setTimeout((function(){a({type:"SETNOTIFICATION",data:null})}),4e3));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},V=Object(i.b)(null,Q)((function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],u=a[1],i=Object(n.useState)(""),l=Object(o.a)(i,2),s=l[0],d=l[1];return r.a.createElement("div",null,r.a.createElement("h2",null,"Log In"),r.a.createElement(J.a,{onSubmit:function(t){t.preventDefault(),e.login({username:c,password:s}),u(""),d("")}},r.a.createElement(J.a.Input,{fluid:!0,label:"Username",placeholder:"Username",type:"text",value:c,onChange:function(e){return u(e.target.value)}}),r.a.createElement(J.a.Input,{fluid:!0,label:"Password",placeholder:"********",type:"password",value:s,onChange:function(e){return d(e.target.value)}}),r.a.createElement(J.a.Button,{type:"submit"},"Log in")))})),X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETNOTIFICATION":return t.data;default:return e}},Z={setNotification:function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"SETNOTIFICATION",data:e}),setTimeout((function(){a({type:"SETNOTIFICATION",data:null})}),4e3);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},$=Object(i.b)(null,Z)((function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],u=a[1],i=Object(n.useState)(""),l=Object(o.a)(i,2),s=l[0],f=l[1],h=Object(n.useState)(""),m=Object(o.a)(h,2),y=m[0],E=m[1],v=function(){var t=Object(p.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),s!==y){t.next=8;break}return t.next=4,b.register({username:c,password:s});case 4:t.sent?e.setNotification("Registration successful! You may now log in."):e.setNotification("Registration failed. Username may already be in use."),t.next=9;break;case 8:e.setNotification("Passwords Not Matching");case 9:u(""),f(""),E("");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("h2",null,"Register"),r.a.createElement(J.a,{onSubmit:v},r.a.createElement(J.a.Input,{fluid:!0,label:"Username",placeholder:"Enter your desired username",type:"text",value:c,onChange:function(e){return u(e.target.value)}}),r.a.createElement(J.a.Input,{fluid:!0,label:"Password",placeholder:"Password",type:"password",value:s,onChange:function(e){return f(e.target.value)}}),r.a.createElement(J.a.Input,{fluid:!0,label:"Repeat Password",placeholder:"Repeat Password",type:"password",value:y,onChange:function(e){return E(e.target.value)}}),r.a.createElement(G.a,{hidden:!0}),r.a.createElement(F.a,{basic:!0,color:"red"},"By registering you agree not to store truly sensitive information on this website"),r.a.createElement(G.a,{hidden:!0}),r.a.createElement(J.a.Button,{type:"submit"},"Register")))})),_=a(365),ee=a(364),te=a(366),ae=a(362),ne=a(357),re=Object(i.b)((function(e){return{dates:e.dates,display:e.display,habits:e.habits}}))((function(e){var t=e.habit,a=e.dates,c=e.display,u=Object(n.useState)(0),i=Object(o.a)(u,2),l=i[0],s=i[1];return Object(n.useEffect)((function(){var e=a.filter((function(e){return e.year===c.displayYear})).filter((function(e){return e.month===c.displayMonth+1})).filter((function(e){return void 0!==e.habitsMarked.find((function(e){return e===t.id}))})),n=Math.round(e.length/c.displayMonthLength*100);s(n)}),[a,c.displayMonthLength,c.displayMonth,t.id,c.displayYear]),r.a.createElement(ee.a,{key:t.id},r.a.createElement("h4",null,t.name),r.a.createElement(ne.a,{percent:l,indicating:!0}),l," % daily habit")})),ce=Object(i.b)((function(e){return{habits:e.habits}}))((function(e){return r.a.createElement(r.a.Fragment,null,e.habits.map((function(e){return r.a.createElement(re,{key:e.id,habit:e})})))})),ue=a(360),ie=Object(i.b)((function(e){return{notification:e.notification}}))((function(e){return r.a.createElement(r.a.Fragment,null,null!==e.notification?r.a.createElement(ue.a,{info:!0},r.a.createElement(ue.a.Header,null,e.notification)):r.a.createElement(r.a.Fragment,null))})),oe={autoLogin:function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:b.setToken(e.token),a({type:"LOGIN",data:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.setItem("user",null),t({type:"LOGOUT"}),t({type:"SETNOTIFICATION",data:"Logged out!"}),setTimeout((function(){t({type:"SETNOTIFICATION",data:null})}),4e3);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},le=Object(i.b)((function(e){return{auth:e.auth}}),oe)((function(e){Object(n.useEffect)((function(){var t=JSON.parse(window.localStorage.getItem("user"));t&&t.token&&e.autoLogin(t)}),[e]);return r.a.createElement(L.a,{fluid:!0},null===e.auth?r.a.createElement(L.a,null,r.a.createElement(G.a,{hidden:!0}),r.a.createElement(_.a,{as:"h1",icon:!0,textAlign:"center"},r.a.createElement(_.a.Subheader,null,"FOR DEMONSTRATION PURPOSES ONLY")),r.a.createElement(ie,null),r.a.createElement(ee.a,null,r.a.createElement(te.a,{columns:"2",relaxed:!0,stackable:!0},r.a.createElement(te.a.Column,null,r.a.createElement(V,null)),r.a.createElement(te.a.Column,{verticalAlign:"middle"},r.a.createElement($,null))),r.a.createElement(G.a,{vertical:!0},"Or"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,null,r.a.createElement(ae.a.Item,{header:!0,color:"violet",name:"title"},r.a.createElement(g.a,{name:"tasks"}),"Habit Tracker"),r.a.createElement(ae.a.Item,{name:"loggedInUser"},"Logged in as ",e.auth.username),r.a.createElement(ae.a.Item,{position:"right",name:"logout"},r.a.createElement(k.a,{animated:!0,onClick:e.logout},r.a.createElement(k.a.Content,{hidden:!0},"Log Out"),r.a.createElement(k.a.Content,{visible:!0},r.a.createElement(g.a,{name:"log out"}))))),r.a.createElement(L.a,{style:{width:"100%"}},r.a.createElement(ie,null),r.a.createElement(U,null),r.a.createElement(G.a,{horizontal:!0},"New Habit"),r.a.createElement(q,null),r.a.createElement(G.a,{horizontal:!0},"Stats"),r.a.createElement(ce,null))),r.a.createElement(G.a,{hidden:!0}),r.a.createElement(L.a,null,r.a.createElement(ee.a,{color:"purple"},r.a.createElement("h6",null,"Nteeams / GitHub Repository / GNU GPL 3.0"))))})),se=a(53),de=a(179),pe=Object(se.c)({habits:I,dates:v,display:D,auth:K,notification:X}),fe=Object(se.d)(pe,Object(se.a)(de.a)),he=function(){u.a.render(r.a.createElement(i.a,{store:fe},r.a.createElement(le,null)),document.getElementById("root"))};he(),fe.subscribe(he)}},[[191,1,2]]]);
//# sourceMappingURL=main.aedf1e94.chunk.js.map